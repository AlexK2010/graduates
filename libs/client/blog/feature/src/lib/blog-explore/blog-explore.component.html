<head>
    <meta name="author" content="DylanSpies" />
    <meta name="component" content="Blog-Explore" />
</head>

<header-and-footer-header></header-and-footer-header>

<div class="page">
    <h1>UP Student Blog</h1><br><br><br>
    <h3>Blog Posts</h3><br>

    <div class="utilities">
        <div fxLayout="row" class="sort">
            <button fxFlexAlign="center" mat-icon-button [matMenuTriggerFor]="menu">
                <mat-icon >menu</mat-icon>  
            </button>
            <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="newestFirst()">
                <span>Newest First</span>
            </button>
                <button mat-menu-item (click)="oldestFirst()">
                <span>Oldest First</span>
            </button>
            </mat-menu>
            <div fxLayout="column">
                <p fxFlexOffset="15px" fxFlexAlign="center" fxShow="true" fxHide.lt-sm="true" fxHide.sm="true">SORT</p>
            </div>
        </div>
        <button class="createbutton" mat-raised-button color="accent" (click)="createBlog()">Create Blog</button>
        <button class="adminbutton" mat-raised-button color="accent" (click)="changeAdmin()">Admin</button>
    </div>
    <mat-grid-list #grid [cols]="cols" rowHeight="350px">
        <div *ngFor="let card of blogs | async">
            <mat-grid-tile>
                <mat-card class="card" fxLayout="column">

                    <div>{{card.content}}</div>

                    <br>

                    <mat-card-header fxFlexAlign="center" class="cardTitle">
                        <mat-card-title>{{card.title}}</mat-card-title>
                        <mat-card-subtitle>Author ID: {{card.userId}}</mat-card-subtitle>
                        <!--Change to Author-->
                    </mat-card-header>

                    <mat-card-content>
                        <div class="buttons">
                            <button *ngIf="admin" class="editbutton" mat-raised-button color="accent" (click)="editBlog(card)">Edit Post</button>
                            <button *ngIf="admin" class="deletebutton" mat-raised-button color="accent" (click)="deleteBlog(card.id)">Delete Post</button>
                            <button class="viewbutton" mat-raised-button color="accent" (click)="readBlog(card.id)">Read More</button>
                        </div>
                    </mat-card-content>

                </mat-card>
            </mat-grid-tile>
        </div>

    </mat-grid-list>
</div>

<footer>
    <header-and-footer-footer></header-and-footer-footer>
</footer>